<!DOCTYPE html>
<html lang="lv">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dynamic Wallet Visualizer — Sepolia NFT Access</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
<style>
body { font-family:'Inter',Arial,sans-serif; background:#000; color:#fff; margin:0; padding:20px; position: relative; }
.container { max-width:1400px; margin:auto; display:flex; flex-direction:column; align-items:center; gap:12px; }
h1 { font-size:36px; margin:0; line-height:1; background:linear-gradient(90deg,#ffffff,#aaaaaa); -webkit-background-clip:text; -webkit-text-fill-color:transparent; text-align:center; }
.subtitle { margin-top:4px; color:#9fb0c3; font-size:18px; text-align:center; }
.controls { display:flex; gap:10px; flex-wrap:wrap; justify-content:center; }
button { padding:12px 20px; border-radius:12px; border:none; cursor:pointer; background:linear-gradient(90deg,#4a90e2,#9013fe); color:#fff; font-weight:700; font-size:16px; box-shadow:0 6px 18px rgba(0,0,0,0.45); transition: transform 0.2s, box-shadow 0.2s; }
button:disabled { background:#444; cursor:not-allowed; box-shadow:0 6px 18px rgba(0,0,0,0.2); }
button:hover:not(:disabled) { transform:translateY(-4px) scale(1.03); box-shadow:0 8px 22px rgba(0,0,0,0.65); }
.snapshot-container { width:100%; background:#000; border-radius:14px; padding:18px; box-shadow:0 12px 40px rgba(0,0,0,0.6); position:relative; }
#snapshotCanvas { width:100%; border-radius:10px; border:1px solid rgba(255,255,255,0.03); display:block; margin-bottom:12px; }
#recordTimer { margin-top:6px; color:#0ff; font-weight:600; font-size:16px; text-align:center; }
#statusContainer { position: relative; width: 100%; height: 40px; margin-top: 8px; }
.status { font-weight:600; font-size:16px; color:#fff; line-height:40px; text-align:center; }
#progressBarContainer { position: absolute; top: 50%; left: 50%; width: 60%; height: 18px; background: rgba(255,255,255,0.1); border-radius: 6px; transform: translate(-50%, -50%); display: none; overflow: hidden; }
#progressBar { height: 100%; width: 100%; background: linear-gradient(90deg,#0ff,#4a90e2); border-radius: 6px; transform: scaleX(0); transform-origin: left center; transition: transform 0.4s ease; }
#overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:999; }
#fullscreenIcon { position:absolute; top:10px; right:10px; display:flex; align-items:center; cursor:pointer; color:#0ff; background:rgba(0,0,0,0.3); border-radius:6px; padding:6px 10px; transition: background 0.2s, transform 0.2s; z-index:10; user-select:none; }
#fullscreenIcon:hover { background:rgba(0,255,255,0.2); transform: scale(1.05); }
#fullscreenText { font-family:'Inter',Arial,sans-serif; white-space: nowrap; margin-left:6px; font-size:16px; font-weight:600; }
#toggleInfoIcon { position:absolute; top:10px; left:10px; display:flex; align-items:center; cursor:pointer; color:#0ff; background:rgba(0,0,0,0.3); border-radius:6px; padding:6px 10px; transition: background 0.2s, transform 0.2s; z-index:10; user-select:none; }
#toggleInfoIcon:hover { background:rgba(0,255,255,0.2); transform: scale(1.05); }
#infoText { font-family:'Inter',Arial,sans-serif; white-space: nowrap; margin-left:6px; font-size:16px; font-weight:600; }
#accountDisplay { width:100%; word-break:break-word; margin-top:8px; font-size:16px; text-align:center; }
#tokenListContainer { display:none; position:absolute; top:80px; left:10px; max-height:150px; width:90%; max-width:576px; background:rgba(0,0,0,0.5); border-radius:9px; overflow-y:auto; padding:10px; color:#fff; font-family:'Inter',Arial,sans-serif; font-size:14px; z-index:15; }
#tokenListContainer table { width:100%; border-collapse:collapse; }
#tokenListContainer th, #tokenListContainer td { padding:6px 8px; text-align:left; font-size:13px; }
#tokenListContainer th { color:#0ff; font-weight:600; }
#tokenListContainer tr:nth-child(even) td { background:rgba(255,255,255,0.05); }
#tokenListContainer tr:nth-child(odd) td { background:rgba(255,255,255,0.02); }
</style>
</head>
<body>
<div class="container">
<header>
<h1>Dynamic Wallet Visualizer</h1>
<p class="subtitle">Watch your Ethereum assets come alive — Sepolia NFT Access</p>
</header>
<section class="controls">
<button id="connectBtn">Connect Wallet</button>
<button id="renderBtn" disabled>Render Snapshot</button>
</section>
<div id="accountDisplay">Connected account: —</div>
<div id="statusContainer">
<div id="statusMsg" class="status"></div>
<div id="progressBarContainer"><div id="progressBar"></div></div>
</div>
<div id="recordTimer">Recording: 0 / 20 s</div>
<section class="snapshot-container">
<canvas id="snapshotCanvas" width="1920" height="1080"></canvas>
<div id="fullscreenIcon">⤢ <span id="fullscreenText">Fullscreen</span></div>
<div id="toggleInfoIcon">ℹ <span id="infoText">Info</span></div>
<div id="tokenListContainer">
<table>
<thead><tr><th>Address</th><th>Balance</th></tr></thead>
<tbody id="tokenListContent"></tbody>
</table>
</div>
</section>
</div>

<script src="https://cdn.jsdelivr.net/npm/ethers@6/dist/ethers.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
<script>
const canvas = document.getElementById('snapshotCanvas'), ctx=canvas.getContext('2d');
const connectBtn=document.getElementById('connectBtn'), renderBtn=document.getElementById('renderBtn');
const accountDisplay=document.getElementById('accountDisplay'), tokenListContainer=document.getElementById('tokenListContainer'), tokenListContent=document.getElementById('tokenListContent');
let provider, signer, account='', tokens=[], particles=[], initialParticles=[], showInfo=true, animRequest=null;
const isMobile=/Mobi|Android/i.test(navigator.userAgent);
function resizeCanvas(){ const dpr=window.devicePixelRatio||1; const scale=isMobile?0.6:1; canvas.width=1920*dpr*scale; canvas.height=1080*dpr*scale; ctx.setTransform(1,0,0,1,0,0); ctx.scale(dpr*scale,dpr*scale); }
window.addEventListener('resize',resizeCanvas); resizeCanvas();
function hashStringToInt(str,mod=1000){let h=2166136261>>>0;for(let i=0;i<str.length;i++){h^=str.charCodeAt(i);h=Math.imul(h,16777619)>>>0;}return h%mod;}
function seededRandomFloat(seedStr){return hashStringToInt(seedStr,10000)/10000;}
async function initParticlesOnce(){initialParticles=[]; const particleCount=Math.min(150,50+(tokens.length||0)*15); const seedBase=account; for(let i=0;i<particleCount;i++){const t=tokens.length?tokens[i%tokens.length]:{balance:1,address:String(i),symbol:'T'}; const balanceFactor=t.isNFT?1:Math.min(t.balance||0,20)/20; let hue=hashStringToInt((t.address||'')+seedBase+i)%360; const speed=0.005+0.01*(hashStringToInt((t.symbol||t.address)+seedBase+i,10)/10); const r=t.isNFT?10:2+6*balanceFactor; const angle=seededRandomFloat(seedBase+i+'angle')*2*Math.PI; const radius=50+seededRandomFloat(seedBase+i+'radius')*400; initialParticles.push({angle,radius,r,hue,speed,token:t});}}
function cloneParticles(){return initialParticles.map(p=>({...p}));}
function drawFrame(frame,showTokensFrame){const dpr=window.devicePixelRatio||1; const scale=isMobile?0.6:1; const W=canvas.width/(dpr*scale); const H=canvas.height/(dpr*scale); ctx.clearRect(0,0,W,H); ctx.fillStyle='#000'; ctx.fillRect(0,0,W,H); const cx0=W/2,cy0=H/2; for(let i=0;i<particles.length;i++){for(let j=i+1;j<i+6&&j<particles.length;j++){const p1=particles[i],p2=particles[j]; const x1=cx0+Math.cos(p1.angle)*p1.radius,y1=cy0+Math.sin(p1.angle)*p1.radius; const x2=cx0+Math.cos(p2.angle)*p2.radius,y2=cy0+Math.sin(p2.angle)*p2.radius; const dx=x1-x2,dy=y1-y2; const dist=Math.sqrt(dx*dx+dy*dy); if(dist<200){const avgBalance=(Math.min(p1.token.balance,20)+Math.min(p2.token.balance,20))/40; const alpha=0.2+0.4*avgBalance*(1-dist/200); ctx.lineWidth=1.5+2*avgBalance; const hue=(p1.hue+p2.hue)/2+frame*0.4; ctx.strokeStyle=`hsla(${hue},100%,70%,${alpha})`; ctx.beginPath(); ctx.moveTo(x1,y1); ctx.lineTo(x2,y2); ctx.stroke();}}} particles.forEach(p=>{p.angle+=p.speed; const cx=cx0+Math.cos(p.angle)*p.radius,cy=cy0+Math.sin(p.angle)*p.radius; const gradient=ctx.createRadialGradient(cx,cy,0,cx,cy,p.r*2.5); gradient.addColorStop(0,`hsla(${p.hue},100%,70%,1)`); gradient.addColorStop(0.5,`hsla(${p.hue+20},100%,60%,0.9)`); gradient.addColorStop(1,`hsla(${p.hue+40},100%,40%,0.5)`); ctx.fillStyle=gradient; ctx.beginPath(); ctx.arc(cx,cy,p.r,0,Math.PI*2); ctx.fill();}); if(showTokensFrame&&showInfo){ctx.fillStyle='#0ff'; ctx.font='22px Inter'; ctx.fillText(`Tokens: ${tokens.length}`,10,80);}}
function animate(frame=0){drawFrame(frame,true); animRequest=requestAnimationFrame(()=>animate(frame+1));}
function stopAnimation(){if(animRequest) cancelAnimationFrame(animRequest); animRequest=null;}
function updateTokenListUI(){if(!tokens||tokens.length===0){tokenListContent.innerHTML='<tr><td colspan="2" style="color:#777;">No tokens</td></tr>'; return;} tokenListContent.innerHTML=''; tokens.forEach(t=>{const tr=document.createElement('tr'); const addrTd=document.createElement('td'); addrTd.textContent=t.address; addrTd.title=t.address; const balTd=document.createElement('td'); balTd.textContent=t.balance.toFixed(4); tr.appendChild(addrTd); tr.appendChild(balTd); tokenListContent.appendChild(tr);});}

// ===== Wallet Integration =====
async function connectWallet(){
  try{
    if(window.ethereum){
      provider=new ethers.BrowserProvider(window.ethereum,"sepolia");
      await provider.send("eth_requestAccounts",[]);
      signer=await provider.getSigner();
      account=await signer.getAddress();
    } else {
      const wcProvider=new WalletConnectProvider.default({ rpc:{11155111:"https://eth-sepolia.g.alchemy.com/v2/YOUR_ALCHEMY_KEY"} });
      await wcProvider.enable();
      provider=new ethers.BrowserProvider(wcProvider,"sepolia");
      signer=await provider.getSigner();
      account=await signer.getAddress();
    }
    accountDisplay.textContent='Connected account: '+account;
    renderBtn.disabled=false;

    // Fetch demo tokens
    tokens=[{address:'0xToken1',balance:1,symbol:'T1'},{address:'0xToken2',balance:3,symbol:'T2'}];
    updateTokenListUI();
    await initParticlesOnce();
    particles=cloneParticles();
    animate();
  }catch(e){console.error(e); alert('Wallet connection failed.'); }
}

// ===== Event Listeners =====
connectBtn.addEventListener('click',connectWallet);
renderBtn.addEventListener('click',async()=>{
  if(!account){await connectWallet(); return;}
  await initParticlesOnce();
  particles=cloneParticles();
  animate();
});
document.getElementById('fullscreenIcon').addEventListener('click',()=>{if(!document.fullscreenElement) canvas.requestFullscreen().catch(()=>{}); else document.exitFullscreen().catch(()=>{});});
document.getElementById('toggleInfoIcon').addEventListener('click',()=>{showInfo=!showInfo; document.getElementById('infoText').textContent=showInfo?'Info':'Hidden'; tokenListContainer.style.display=showInfo?'block':'none'; updateTokenListUI();});
</script>
</body>
</html>









































































































































